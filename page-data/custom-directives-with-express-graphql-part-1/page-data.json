{"componentChunkName":"component---src-templates-single-post-js","path":"/custom-directives-with-express-graphql-part-1","result":{"data":{"mdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Custom directives with express-graphql [Part-1]\",\n  \"slug\": \"custom-directives-with-express-graphql-part-1\",\n  \"date\": \"29-06-2021\",\n  \"featureImage\": \"feature.jpg\",\n  \"excerpt\": \"Initiating the project structure and defining the app architecture.\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h3\", {\n    \"id\": \"starting-points\"\n  }, \"Starting points\"), mdx(\"p\", null, \"The project is divided in 3 parts. If you already have a project setup and would like to\\nonly see how custom directives can be implemented using express-graphql, jump to\\npart 3 which can be found below:\"), mdx(\"p\", null, \"\\uD83D\\uDCCD Final code: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/pineapple45/custom-directives-with-express-graphql/tree/main\"\n  }, \"Link\")), mdx(\"p\", null, \"\\uD83C\\uDF10 Live preview: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://pineapple45.github.io/custom-directives-with-express-graphql/\"\n  }, \"Link\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Part-2: \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/custom-directives-with-express-graphql-part-2\"\n  }, \"Link\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Part-3: \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/custom-directives-with-express-graphql-part-3\"\n  }, \"Link\"))), mdx(\"p\", null, \"The first 2 parts are just building blocks where the whole project setup is done. I initially thought to directly show how to implement custom-directives but then I realized it would be much better if I create a sample project along with it as it depicts the use-case in a much better and understandable way. To be honest, first 2 parts are not going to be much fun since these parts only involve testing and getting the base of the project completed . I will try to get these done as fast as I can.\"), mdx(\"p\", null, \"\\uD83D\\uDC49 Note that I am making use of graphql-directive because I think it is a light-weight tool that works really well with express-graphql . There are other tools such as graphql-tool that can also be used to write custom-directives but personally I prefer to pair graphql-tools with apollo-server. Its just my preference.\"), mdx(\"p\", null, \"Also note , In all of these parts I will not spend any time on the frontend since this posts mostly deal with the backend part. I will create a frontend in part 3 but will breeze through that part rather quickly.\\nThe app that we are working on is kind of like instagram ( i call it \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"photos!\"), \" ). The functionality of the app includes the following:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create posts\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Each post can be liked\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Each posts can be commented upon\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Only admin can create posts\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Admin has all permissions\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"There will be a Moderator assigned by admin that can moderate posts\\nand comments on each post\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Unauthenticated users can only view posts\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Authenticated users can view , like and comment on posts created by admins. Note only admins can create posts! If you want\\nto give normal users the ability to create posts, you can do that also. But I have not added that functionality.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Only Admin can view the users list and has the ability to update roles of any single user\\nto any of the following roles:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"ADMIN\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"MODERATOR\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"AUTHENTICATED_USER\"))))), mdx(\"p\", null, \"In total we will use 3 custom directives. 2 to check if user is authenticated as well as\\nauthorised.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"@isAuthenticated\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"@hasAuthorisation(role: Role)\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"@upperCase\"), \" This simple custom directive will just convert\\nheadings to uppercase when queried from frontend.\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"@hasAuthorisation\"), \" also implements the functionality of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"@isAuthenticated\"), \" but adds a check to see if correct user is authorized for the request!\"), mdx(\"h3\", {\n    \"id\": \"initialising-the-server\"\n  }, \"Initialising the server\"), mdx(\"p\", null, \"I used typescript for this project, but pure javascript can also be used as per your convenience.\\nThe dependencies to be used are as follows:\"), mdx(\"h4\", {\n    \"id\": \"core-dependencies\"\n  }, \"core dependencies\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"    \\\"@types/jsonwebtoken\\\": \\\"^8.5.2\\\",\\n    \\\"bcrypt\\\": \\\"^5.0.1\\\",\\n    \\\"cors\\\": \\\"^2.8.5\\\",\\n    \\\"express\\\": \\\"^4.17.1\\\",\\n    \\\"express-graphql\\\": \\\"^0.12.0\\\",\\n    \\\"graphql\\\": \\\"14.6.0\\\",\\n    \\\"graphql-directive\\\": \\\"^0.2.1\\\",\\n    \\\"jsonwebtoken\\\": \\\"^8.5.1\\\",\\n    \\\"mongoose\\\": \\\"^5.12.14\\\"\\n\")), mdx(\"h4\", {\n    \"id\": \"devdependencies\"\n  }, \"devDependencies\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"   \\\"@types/bcrypt\\\": \\\"^5.0.0\\\",\\n    \\\"@types/cors\\\": \\\"^2.8.10\\\",\\n    \\\"@types/express\\\": \\\"^4.17.12\\\",\\n    \\\"@types/mongoose\\\": \\\"^5.11.97\\\",\\n    \\\"@types/node\\\": \\\"^15.12.4\\\",\\n    \\\"dotenv\\\": \\\"^10.0.0\\\",\\n    \\\"nodemon\\\": \\\"^2.0.7\\\",\\n    \\\"rimraf\\\": \\\"^3.0.2\\\",\\n    \\\"typescript\\\": \\\"^4.3.4\\\"\\n\")), mdx(\"p\", null, \"\\uD83D\\uDC49 Please note the version number for 'graphql' package and to specifically use 14.6.0, as I was having a couple of problems with newer version of 'graphql' package.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"yarn init\\nyarn add\\n\")), mdx(\"p\", null, \"The basic folder structure for the whole project will be as follows:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"server\\n-dist\\n-node_modules\\n-src\\n--graphql\\n---directives\\n---resolvers\\n---schemas\\n--models\\n-index.ts\\n-.env\\n-package.json\\n-tsconfig.json\\nyarn.lock\\n\")), mdx(\"h3\", {\n    \"id\": \"folder-structure-breakdown\"\n  }, \"Folder structure breakdown\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"dist\"), \"-- folder contains the compiled javascript files generated by tsc compiler.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"node_modules\"), \"-- contains the source files related to the dependencies that we installed earlier.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"src\"), \"-- is the primary folder where our code will reside.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"graphql\"), \"-- folder consists of schemas, resolvers and directive-resolver that will be used a bit later on.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"models\"), \"-- folder consists of schema for our mongodb database.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"index.ts\"), \"-- is the starting file for our server. Everything will be initialised from here.\")), mdx(\"p\", null, \"The structure might not be clear right now but will get clearer later on.\\nAlso initially we will be using only one schema file for defining out graphql\\nqueries and mutations. Later on we will divide the schema into seperate files\\n(schema splitting).\"), mdx(\"p\", null, \"Lets install the dependencies for now.\"), mdx(\"h3\", {\n    \"id\": \"running-the-project-for-the-first-time\"\n  }, \"Running the project for the first time\"), mdx(\"p\", null, \"For running the project, there are two main commands:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"yarn start\\n// or\\nnpm start\\n\")), mdx(\"p\", null, \"The command above executes \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"tsc --watch\"), \" which internally spins up the typescript compiler.\\nYou should see the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"dist\"), \" folder being generated as specified in tsconfig.json\\nThe next command is\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"yarn dev\\n// or\\nnpm run dev\\n\")), mdx(\"p\", null, \"This run nodemon dist/index.js and keeps the server running and tracks all the changes on the go.\"), mdx(\"p\", null, \"\\uD83D\\uDC49 Please note that I am using 2 seperate terminals to run the above commands i.e \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"npm run dev\"), \" & \", mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"npm run start\")), \" .\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"tsc --watch\\\",\\n    \\\"compile\\\": \\\"tsc && node dist/index.js\\\",\\n    \\\"dev\\\": \\\"nodemon dist/index.js\\\",\\n    \\\"dev:tsc\\\": \\\"tsc --watch --preserveWatchOutput\\\",\\n    \\\"build\\\": \\\"rimraf ./dist && tsc -p .\\\",\\n    \\\"clean\\\": \\\"rimraf ./dist\\\"\\n  },\\n\")), mdx(\"p\", null, \"If you want to run both in the same terminal, do the following changes to your scripts property in package.json and then in terminal to start the project, just do \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"npm run dev\"))), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"\\\"scripts\\\": {\\n   \\\"start\\\": \\\"tsc --watch\\\",\\n   \\\"compile\\\": \\\"tsc && node dist/index.js\\\",\\n   \\\"dev\\\": \\\"nodemon --watch src/ --exec \\\\\\\"npm run compile\\\\\\\" --verbose -e ts\\\",\\n   \\\"build\\\": \\\"rimraf ./dist && tsc -p .\\\",\\n   \\\"clean\\\": \\\"rimraf ./dist\\\"\\n },\\n\")), mdx(\"h3\", {\n    \"id\": \"connecting-to-monogdb-and-adding-mongoose-schema\"\n  }, \"Connecting to monogdb and adding mongoose schema\"), mdx(\"p\", null, \"The index.ts file in \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"src\"), \" directory after adding connecting to mongodb will look something like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\"\n  }, \"import * as dotenv from \\\"dotenv\\\"\\ndotenv.config()\\nimport express, { Express } from \\\"express\\\"\\nimport mongoose from \\\"mongoose\\\"\\nconst app: Express = express()\\n\\nconst PORT =\\n  process.env.NODE_ENV === \\\"production\\\"\\n    ? process.env.PORT\\n    : process.env.PORT_DEV\\n\\nconst MONGO_URI = process.env.MONGO_URI as string\\n\\nmongoose\\n  .connect(MONGO_URI, { useNewUrlParser: true, useUnifiedTopology: true })\\n  .then(() => {\\n    console.log(\\\"connected to mongodb...\\\")\\n    app.listen(PORT, () => {\\n      console.log(`server started on port ${PORT}`)\\n    })\\n  })\\n  .catch(err => {\\n    console.log(err)\\n  })\\n\")), mdx(\"h3\", {\n    \"id\": \"adding-environment-variables\"\n  }, \"Adding environment variables\"), mdx(\"p\", null, \"The environment variables file will look something like this. While moving to production, you can simply update these here and code will update automagically!\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-env\"\n  }, \"NODE_ENV=\\\"developement\\\"\\nPORT_DEV=4000\\nMONGO_URI=\\\"mongodb+srv://test:<password>@cluster0.kzxvi.mongodb.net/myFirstDatabase?retryWrites=true&w=majority\\\"\\n\")), mdx(\"p\", null, \"After starting the project, the output will look something like this:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"for yarn dev\\n\", mdx(\"undefined\", {\n    parentName: \"p\"\n  }, \"\\n      \", mdx(\"div\", {\n    \"className\": \"gria-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"overflow\": \"hidden\"\n    }\n  }, \"\\n      \\n        \\n          \", mdx(\"div\", {\n    parentName: \"div\",\n    \"className\": \"gria-image-padding\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"paddingBottom\": \"29.000000000000004%\"\n    }\n  }), \"\\n        \\n        \\n      \\n      \", mdx(\"div\", {\n    parentName: \"div\",\n    \"className\": \"gria-image-placeholder\",\n    \"style\": {\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"background\": \"#fff url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA4ElEQVQY042P606DQBBG+yYW2AUWSsulcinLsiySKH3/5zmGGo3GmvrjZCb5kjPz7Zwz2GmgOp/IiwNJKhDyiSj27xJG3p/Zxu5lMUxOY8aO9bqgdUdRZoSRjwy9LzbRp+z7/kv4th6Zl4xeKwaT0F0SyiomLwRFKTjlH/OQBaSH4PGHzim0jmjbkMkpRhsxTTHWKuo6pCwlVSVvB5L0H5XnVTDMgt4K5qugGwR2kUyvEu18GuPRjwF1I1HK/1H7rrC5FLR9xWAbzs2RustpupLePBOn+xuR2iOk91C2Cd8BYxy17ofHs8IAAAAASUVORK5CYII=) center / cover no-repeat\"\n    }\n  }), \"\\n    \\n    \", mdx(\"picture\", {\n    parentName: \"div\"\n  }, \"\\n      \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/fed1e915ef8b198b719750fdbed39bc3/772e8/lfYCgtBor.png 200w\", \"/static/fed1e915ef8b198b719750fdbed39bc3/e17e5/lfYCgtBor.png 400w\", \"/static/fed1e915ef8b198b719750fdbed39bc3/01267/lfYCgtBor.png 713w\"]\n  }), \"\\n      \", mdx(\"img\", {\n    parentName: \"picture\",\n    \"className\": \"gria-image\",\n    \"src\": \"/static/fed1e915ef8b198b719750fdbed39bc3/01267/lfYCgtBor.png\",\n    \"srcSet\": [\"/static/fed1e915ef8b198b719750fdbed39bc3/772e8/lfYCgtBor.png 200w\", \"/static/fed1e915ef8b198b719750fdbed39bc3/e17e5/lfYCgtBor.png 400w\", \"/static/fed1e915ef8b198b719750fdbed39bc3/01267/lfYCgtBor.png 713w\"],\n    \"title\": \"1.png\",\n    \"alt\": \"1.png\",\n    \"loading\": \"lazy\",\n    \"style\": {\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"objectFit\": \"cover\",\n      \"objectPosition\": \"center center\"\n    }\n  }), \"\\n    \"), \"\\n  \\n      \"), \"\\n    \"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"for yarn start\\n\", mdx(\"undefined\", {\n    parentName: \"p\"\n  }, \"\\n      \", mdx(\"div\", {\n    \"className\": \"gria-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"overflow\": \"hidden\"\n    }\n  }, \"\\n      \\n        \\n          \", mdx(\"div\", {\n    parentName: \"div\",\n    \"className\": \"gria-image-padding\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"paddingBottom\": \"16%\"\n    }\n  }), \"\\n        \\n        \\n      \\n      \", mdx(\"div\", {\n    parentName: \"div\",\n    \"className\": \"gria-image-placeholder\",\n    \"style\": {\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"background\": \"#fff url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAnElEQVQI1z2OWQ4DIQxD5yhdZ2OAQIAZlo9Wau9/JFehaj+eYlmW48GSwh+n4L1GKRFHDmA2SIdHqQm5BJBT4GCRS4Tnb068+3jCOJ0xzRcMxi4QtBFmkNsQEyFEgmfTC0QLltZeIPp3nd+wrDfMy7WXDvLJeQ0iBfJbD9UakXPoWlZwMNgz4/FsaC31hWl3ODKjth2v9wPMui/9AFALXoGRtJ32AAAAAElFTkSuQmCC) center / cover no-repeat\"\n    }\n  }), \"\\n    \\n    \", mdx(\"picture\", {\n    parentName: \"div\"\n  }, \"\\n      \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/949f39d238d56d7477ae938af4b46298/772e8/1fp8hQB7s.png 200w\", \"/static/949f39d238d56d7477ae938af4b46298/e17e5/1fp8hQB7s.png 400w\", \"/static/949f39d238d56d7477ae938af4b46298/17d73/1fp8hQB7s.png 571w\"]\n  }), \"\\n      \", mdx(\"img\", {\n    parentName: \"picture\",\n    \"className\": \"gria-image\",\n    \"src\": \"/static/949f39d238d56d7477ae938af4b46298/17d73/1fp8hQB7s.png\",\n    \"srcSet\": [\"/static/949f39d238d56d7477ae938af4b46298/772e8/1fp8hQB7s.png 200w\", \"/static/949f39d238d56d7477ae938af4b46298/e17e5/1fp8hQB7s.png 400w\", \"/static/949f39d238d56d7477ae938af4b46298/17d73/1fp8hQB7s.png 571w\"],\n    \"title\": \"2.png\",\n    \"alt\": \"2.png\",\n    \"loading\": \"lazy\",\n    \"style\": {\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"objectFit\": \"cover\",\n      \"objectPosition\": \"center center\"\n    }\n  }), \"\\n    \"), \"\\n  \\n      \"), \"\\n    \")))), mdx(\"p\", null, \"\\uD83D\\uDCCC The code till now can be found here: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/pineapple45/custom-directives-with-express-graphql/tree/initial-files-and-folders-part-1\"\n  }, \"Link\")), mdx(\"h3\", {\n    \"id\": \"adding-mongoose-schema\"\n  }, \"Adding mongoose schema\"), mdx(\"p\", null, \"After connecting to database. Now it's time for creating mongoose models that will represent how our data will be saved in database.\\nFor this I will create the models folder inside \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"src\"), \" directory and create 4 models:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"User\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Post\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Like\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Comment\")), mdx(\"p\", null, \"In each of these 4 folders, I added 2 files: \", \"[Model]\", \".ts & index.ts\"), mdx(\"p\", null, \"This would look something like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"-src\\n--models\\n---User\\n----User.ts\\n----index.ts\\n---Post\\n----Post.ts\\n----index.ts\\n---Like\\n----Like.ts\\n----index.ts\\n---Comment\\n----Comment.ts\\n----index.ts\\n\")), mdx(\"p\", null, \"The code for these files is as shown below:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\"\n  }, \"/* User.ts */\\nimport { Schema, model } from \\\"mongoose\\\"\\n\\nexport enum Role {\\n  ADMIN = \\\"ADMIN\\\",\\n  MODERATOR = \\\"MODERATOR\\\",\\n  AUTH_USER = \\\"AUTH_USER\\\",\\n}\\n\\ninterface UserSchemaType {\\n  username: string\\n  email: string\\n  password: string\\n  role: string\\n}\\n\\nconst userSchema = new Schema<UserSchemaType>({\\n  username: {\\n    type: String,\\n    required: true,\\n    unique: true,\\n  },\\n  email: {\\n    type: String,\\n    required: true,\\n    unique: true,\\n  },\\n  password: {\\n    type: String,\\n    requried: true,\\n    min: [6, \\\"password must be greater or equal to 6 characters\\\"],\\n  },\\n  role: {\\n    type: String,\\n    default: Role.AUTH_USER,\\n  },\\n})\\n\\nexport default model(\\\"User\\\", userSchema)\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\"\n  }, \"/* Post.ts */\\nimport { Schema, model } from \\\"mongoose\\\"\\n\\ninterface PostType {\\n  image: string\\n  title: string\\n  description: string\\n  creatorId: string\\n}\\n\\nconst postSchema = new Schema<PostType>({\\n  image: {\\n    type: String,\\n    required: false,\\n  },\\n  title: {\\n    type: String,\\n    required: true,\\n  },\\n  description: {\\n    type: String,\\n    required: false,\\n  },\\n  creatorId: {\\n    type: Schema.Types.ObjectId,\\n    ref: \\\"User\\\",\\n  },\\n})\\n\\nexport default model(\\\"Post\\\", postSchema)\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\"\n  }, \"/* Comment.ts */\\nimport { Schema, model } from \\\"mongoose\\\"\\n\\ninterface CommentType {\\n  text: string\\n  postId: string\\n  creatorId: string\\n}\\n\\nconst commentSchema = new Schema({\\n  text: {\\n    type: String,\\n    required: true,\\n  },\\n  postId: {\\n    type: Schema.Types.ObjectId,\\n    ref: \\\"Post\\\",\\n  },\\n  creatorId: {\\n    type: Schema.Types.ObjectId,\\n    ref: \\\"User\\\",\\n  },\\n})\\n\\nexport default model(\\\"Comment\\\", commentSchema)\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\"\n  }, \"/* Like.ts */\\nimport { Schema, model } from \\\"mongoose\\\"\\n\\ninterface LikeType {\\n  postId: string\\n  creatorId: string\\n}\\n\\nconst LikeSchema = new Schema<LikeType>({\\n  postId: {\\n    type: Schema.Types.ObjectId,\\n    ref: \\\"Post\\\",\\n  },\\n  creatorId: {\\n    type: Schema.Types.ObjectId,\\n    ref: \\\"User\\\",\\n  },\\n})\\n\\nexport default model(\\\"Like\\\", LikeSchema)\\n\")), mdx(\"p\", null, \"\\uD83D\\uDCCC The code till now can be found here: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/pineapple45/custom-directives-with-express-graphql/tree/mongodb-schema-setup-part-1/\"\n  }, \"Link\")), mdx(\"p\", null, \"\\uD83D\\uDC49 Note: In the final code repository there is a client-redux folder which also consists of frontend with client graphql implementation using redux. Although , it is important to note that, functionalities such live as refetching of queries , implementaion of custom fetch and error policies is not implemented in this project.\"), mdx(\"p\", null, \"\\uD83D\\uDCCD Final code: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/pineapple45/custom-directives-with-express-graphql/tree/main\"\n  }, \"Link\")), mdx(\"p\", null, \"\\uD83C\\uDF10 Live preview: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://pineapple45.github.io/custom-directives-with-express-graphql/\"\n  }, \"Link\")), mdx(\"p\", null, \"In the next part we will configure graphql and instantiate the graphql schema along\\nwith its resolvers. \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/custom-directives-with-express-graphql-part-2\"\n  }, \"Part-2 ->\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#starting-points","title":"Starting points"},{"url":"#initialising-the-server","title":"Initialising the server","items":[{"url":"#core-dependencies","title":"core dependencies"},{"url":"#devdependencies","title":"devDependencies"}]},{"url":"#folder-structure-breakdown","title":"Folder structure breakdown"},{"url":"#running-the-project-for-the-first-time","title":"Running the project for the first time"},{"url":"#connecting-to-monogdb-and-adding-mongoose-schema","title":"Connecting to monogdb and adding mongoose schema"},{"url":"#adding-environment-variables","title":"Adding environment variables"},{"url":"#adding-mongoose-schema","title":"Adding mongoose schema"}]},"headings":[{"depth":3,"value":"Starting points"},{"depth":3,"value":"Initialising the server"},{"depth":4,"value":"core dependencies"},{"depth":4,"value":"devDependencies"},{"depth":3,"value":"Folder structure breakdown"},{"depth":3,"value":"Running the project for the first time"},{"depth":3,"value":"Connecting to monogdb and adding mongoose schema"},{"depth":3,"value":"Adding environment variables"},{"depth":3,"value":"Adding mongoose schema"}],"frontmatter":{"date":"29-06-2021","excerpt":"Initiating the project structure and defining the app architecture.","slug":"custom-directives-with-express-graphql-part-1","title":"Custom directives with express-graphql [Part-1]","featureImage":{"publicURL":"/static/1b289d874439805d34eead0c1756920b/feature.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABy6yMRiD/xAAZEAACAwEAAAAAAAAAAAAAAAAAAgERICH/2gAIAQEAAQUCGSieY//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAABESAi/9oACAEBAAY/AhaTmv8A/8QAGhABAAEFAAAAAAAAAAAAAAAAEQABICFBUf/aAAgBAQABPyEnDBxqUIs//9oADAMBAAIAAwAAABDAD//EABYRAAMAAAAAAAAAAAAAAAAAAAEQYf/aAAgBAwEBPxAxf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQEAAQUAAAAAAAAAAAAAAAERACAxQXGR/9oACAEBAAE/ECi0O8MztsvDl2hnJo//2Q==","aspectRatio":1.5384615384615385,"src":"/static/1b289d874439805d34eead0c1756920b/14b42/feature.jpg","srcSet":"/static/1b289d874439805d34eead0c1756920b/f836f/feature.jpg 200w,\n/static/1b289d874439805d34eead0c1756920b/2244e/feature.jpg 400w,\n/static/1b289d874439805d34eead0c1756920b/14b42/feature.jpg 800w,\n/static/1b289d874439805d34eead0c1756920b/47498/feature.jpg 1200w,\n/static/1b289d874439805d34eead0c1756920b/0e329/feature.jpg 1600w,\n/static/1b289d874439805d34eead0c1756920b/ee1b0/feature.jpg 1721w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},"pageContext":{"id":"e495032b-2cac-574b-822d-c4e48763d378"}},"staticQueryHashes":["2933417362","3079204723"]}